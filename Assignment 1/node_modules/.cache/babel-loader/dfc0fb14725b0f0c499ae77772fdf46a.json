{"ast":null,"code":"import _slicedToArray from\"/Users/ahadyboy/Desktop/Tha Boy/UNI/2020 - UNI/SWEN325/Assignment 1/Packit/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createContext,useState,useEffect}from'react';import firebase from\"firebase\";var SuitcasesContext=createContext({});function SuitcasesContextProvider(props){var tripID=props.tripID;console.log(tripID);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),suitcases=_useState2[0],setSuitcases=_useState2[1];var dbRef=firebase.database().ref('/trips/'+tripID+'/suitcases');console.log(dbRef);useEffect(function(){dbRef.on('value',function(snapshot){var data=snapshot.val();if(data!=null){setSuitcases(Object.values(data));console.log(Object.values(data));}});},[tripID]);// Nifty trick with useEffect from: https://css-tricks.com/run-useeffect-only-once/\nreturn/*#__PURE__*/React.createElement(SuitcasesContext.Provider,{value:{suitcases:suitcases}},props.children);}var SuitcasesContextConsumer=SuitcasesContext.Consumer;export{SuitcasesContext,SuitcasesContextProvider,SuitcasesContextConsumer};","map":{"version":3,"sources":["/Users/ahadyboy/Desktop/Tha Boy/UNI/2020 - UNI/SWEN325/Assignment 1/Packit/src/SuitcasesState.tsx"],"names":["React","createContext","useState","useEffect","firebase","SuitcasesContext","SuitcasesContextProvider","props","tripID","console","log","suitcases","setSuitcases","dbRef","database","ref","on","snapshot","data","val","Object","values","children","SuitcasesContextConsumer","Consumer"],"mappings":"iMAAA,MAAOA,CAAAA,KAAP,EAAgBC,aAAhB,CAA+BC,QAA/B,CAAyCC,SAAzC,KAA0D,OAA1D,CACA,MAAOC,CAAAA,QAAP,KAAqB,UAArB,CAOA,GAAIC,CAAAA,gBAAgB,CAAGJ,aAAa,CAAC,EAAD,CAApC,CAEA,QAASK,CAAAA,wBAAT,CAAkCC,KAAlC,CAAuF,CAErF,GAAIC,CAAAA,MAAM,CAAGD,KAAK,CAACC,MAAnB,CACAC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EAHqF,cAInDN,QAAQ,CAAC,EAAD,CAJ2C,wCAI9ES,SAJ8E,eAInEC,YAJmE,eAMrF,GAAIC,CAAAA,KAAK,CAAGT,QAAQ,CAACU,QAAT,GAAoBC,GAApB,CAAwB,UAAYP,MAAZ,CAAqB,YAA7C,CAAZ,CAEAC,OAAO,CAACC,GAAR,CAAYG,KAAZ,EAEAV,SAAS,CAAC,UAAM,CACdU,KAAK,CAACG,EAAN,CAAS,OAAT,CAAkB,SAAAC,QAAQ,CAAI,CAC5B,GAAIC,CAAAA,IAAI,CAAGD,QAAQ,CAACE,GAAT,EAAX,CACA,GAAID,IAAI,EAAI,IAAZ,CAAkB,CAChBN,YAAY,CAACQ,MAAM,CAACC,MAAP,CAAcH,IAAd,CAAD,CAAZ,CACAT,OAAO,CAACC,GAAR,CAAYU,MAAM,CAACC,MAAP,CAAcH,IAAd,CAAZ,EACD,CACF,CAND,EAOD,CARQ,CAQN,CAACV,MAAD,CARM,CAAT,CAQc;AAEd,mBACE,oBAAC,gBAAD,CAAkB,QAAlB,EAA2B,KAAK,CAAE,CAACG,SAAS,CAAGA,SAAb,CAAlC,EAA4DJ,KAAK,CAACe,QAAlE,CADF,CAGD,CAED,GAAIC,CAAAA,wBAAwB,CAAGlB,gBAAgB,CAACmB,QAAhD,CAEA,OAASnB,gBAAT,CAA2BC,wBAA3B,CAAqDiB,wBAArD","sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\nimport firebase from \"firebase\";\nimport Suitcase from \"./classes/Suitcase\";\n\nexport interface Suitcases {\n  suitcases : Suitcase[]\n}\n\nlet SuitcasesContext = createContext({} as Suitcases);\n\nfunction SuitcasesContextProvider(props: { children: React.ReactNode; tripID: string}) {\n\n  let tripID = props.tripID;\n  console.log(tripID);\n  const [suitcases, setSuitcases] = useState([] as Suitcase[]);\n\n  let dbRef = firebase.database().ref('/trips/' + tripID + '/suitcases');\n\n  console.log(dbRef);\n\n  useEffect(() => {\n    dbRef.on('value', snapshot => {\n      let data = snapshot.val();\n      if (data != null) {\n        setSuitcases(Object.values(data));\n        console.log(Object.values(data));\n      }\n    });\n  }, [tripID]); // Nifty trick with useEffect from: https://css-tricks.com/run-useeffect-only-once/\n\n  return (\n    <SuitcasesContext.Provider value={{suitcases : suitcases}}>{props.children}</SuitcasesContext.Provider>\n  )\n}\n\nlet SuitcasesContextConsumer = SuitcasesContext.Consumer;\n\nexport { SuitcasesContext, SuitcasesContextProvider, SuitcasesContextConsumer };"]},"metadata":{},"sourceType":"module"}