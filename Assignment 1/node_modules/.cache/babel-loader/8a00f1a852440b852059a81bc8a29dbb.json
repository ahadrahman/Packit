{"ast":null,"code":"var _jsxFileName = \"/Users/ahadyboy/Desktop/Tha Boy/UNI/2020 - UNI/SWEN325/Assignment 1/Packit/src/pages/SuitcaseDetails.tsx\";\nimport React, { useContext, useState } from \"react\";\nimport { IonBackButton, IonButtons, IonCard, IonCardContent, IonCardHeader, IonCardTitle, IonContent, IonFab, IonFabButton, IonFabList, IonHeader, IonIcon, IonImg, IonPage, IonTitle, IonToolbar, IonRow, IonGrid, IonCol, IonItemDivider, IonLabel, IonActionSheet, IonModal, IonButton } from \"@ionic/react\";\nimport { TripsContext } from \"../TripsState\";\nimport { SuitcasesContextProvider } from \"../SuitcasesState\";\nimport Trip from \"../classes/Trip\";\nimport Suitcase from \"../classes/Suitcase\";\nimport './SuitcaseDetails.css';\nimport { add, camera, trash, close } from \"ionicons/icons\";\nimport firebase from \"firebase\";\nimport { usePhotoGallery } from \"../usePhotoGallery\";\nimport MyModal from \"../components/EditImageTextModal\";\n\nconst SuitcaseDetails = ({\n  match\n}) => {\n  let tripName = match.params.id;\n  let suitcaseName = match.params.suitcaseID;\n  const {\n    trips\n  } = useContext(TripsContext);\n  let currentTrip = new Trip(\"Loading...\", new Date(1975, 7, 26), new Date(1975, 8, 26), \"Wellington\");\n  trips.forEach(t => {\n    if (t.tripName === tripName) {\n      currentTrip = t;\n    }\n  }); // const suitcases = SuitcasesContextProvider({null; currentTrip.id}); //Somehow pass a tripID here to get the suitcases\n  //\n  // console.log(currentTrip);\n  //\n\n  let suitcases = currentTrip.suitcases;\n  let currentSuitcase = new Suitcase(\"Loading...\", \"green\");\n\n  for (let x of Object.entries(suitcases)) {\n    if (x[1].suitcaseName === suitcaseName) {\n      currentSuitcase = new Suitcase(x[1].suitcaseName, x[1].colour);\n      currentSuitcase.setID(x[1].id);\n    }\n  } // let itemhref = \"trips/\" + currentTrip.tripName + \"/\" + currentSuitcase.suitcaseName + \"/additem\";\n  // if (image instanceof Camera) {\n  //   console.log(image.base64String);\n  // }\n  // let captureDataUrl = 'data:image/jpeg;base64,' + image.base64String;\n\n\n  const {\n    deletePhoto,\n    photos,\n    takePhoto\n  } = usePhotoGallery(currentTrip.tripName, currentSuitcase.suitcaseName);\n  const [photoSelected, setPhotoSelected] = useState();\n  const [showModal, setShowModal] = useState(false);\n  return /*#__PURE__*/React.createElement(SuitcasesContextProvider, {\n    tripID: currentTrip.id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(IonPage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(IonHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(IonToolbar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IonButtons, {\n    slot: \"start\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonBackButton, {\n    defaultHref: `/trips/${currentTrip.tripName}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(IonTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }\n  }, \"Inside \", suitcaseName, \" Suitcase\"))), /*#__PURE__*/React.createElement(IonContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 9\n    }\n  }, photoSelected ? /*#__PURE__*/React.createElement(IonModal, {\n    isOpen: showModal,\n    cssClass: \"my-custom-class\",\n    onDidDismiss: () => setPhotoSelected(undefined),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(MyModal, {\n    photo: photoSelected,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(IonButton, {\n    onClick: () => setShowModal(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }\n  }, \"Close\")) : /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 16\n    }\n  }), /*#__PURE__*/React.createElement(IonCard, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IonImg, {\n    src: `../assets/suitcases/${currentSuitcase.colour}.png`,\n    className: \"suitcaseDetails\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 17\n    }\n  }), /*#__PURE__*/React.createElement(IonCardHeader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(IonCardTitle, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 17\n    }\n  }, currentSuitcase.suitcaseName)), /*#__PURE__*/React.createElement(IonCardContent, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 15\n    }\n  }, \"This suitcase is part of your \", currentTrip.tripName, \" trip.\")), /*#__PURE__*/React.createElement(IonItemDivider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IonLabel, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, \"Items\")), /*#__PURE__*/React.createElement(IonGrid, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IonRow, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, photos.map((photo, index) => {\n    var _photo$base;\n\n    return /*#__PURE__*/React.createElement(IonCol, {\n      size: \"6\",\n      key: index,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(IonImg, {\n      onClick: () => setPhotoSelected(photo),\n      src: (_photo$base = photo.base64) !== null && _photo$base !== void 0 ? _photo$base : photo.webviewPath,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 19\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"myOverlay\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 19\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card-title\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131,\n        columnNumber: 21\n      }\n    }, photo.description)));\n  }))), /*#__PURE__*/React.createElement(IonFab, {\n    vertical: \"bottom\",\n    horizontal: \"end\",\n    slot: \"fixed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IonFabButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonIcon, {\n    icon: add,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(IonFabList, {\n    side: \"top\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonFabButton, {\n    onClick: async () => {\n      setPhotoSelected(await takePhoto());\n      setShowModal(true);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(IonIcon, {\n    icon: camera,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 17\n    }\n  })))), /*#__PURE__*/React.createElement(IonFab, {\n    vertical: \"bottom\",\n    horizontal: \"start\",\n    slot: \"fixed\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IonFabButton, {\n    href: `/trips/${currentTrip.tripName}`,\n    onClick: () => deleteSuitcase(currentTrip, currentSuitcase),\n    color: \"danger\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(IonIcon, {\n    icon: trash,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }))), /*#__PURE__*/React.createElement(IonActionSheet, {\n    isOpen: !!photoSelected,\n    buttons: [{\n      text: 'Delete',\n      role: 'destructive',\n      icon: trash,\n      handler: () => {\n        if (photoSelected) {\n          deletePhoto(photoSelected); // setPhotoSelected(undefined);\n        }\n      }\n    }, {\n      text: 'Cancel',\n      icon: close,\n      role: 'cancel'\n    }, //   {\n    //   text: 'Computer Vision',\n    //   role: 'destructive',\n    //   handler: () => {\n    //     if (photoSelected) {\n    //       computerVision(photoSelected);\n    //     }\n    //   }\n    // },\n    {\n      text: 'Edit Text',\n      role: 'destructive',\n      handler: () => {\n        if (photoSelected) {\n          setShowModal(true);\n        }\n      }\n    }] // onDidDismiss={() => setPhotoSelected(undefined)}\n    ,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 11\n    }\n  }))));\n};\n\nfunction deleteSuitcase(t, s) {\n  console.log(s.id);\n  let dbRef = firebase.database().ref('/trips/' + t.id + '/suitcases/' + s.id);\n  dbRef.remove();\n}\n\nexport default SuitcaseDetails;","map":{"version":3,"sources":["/Users/ahadyboy/Desktop/Tha Boy/UNI/2020 - UNI/SWEN325/Assignment 1/Packit/src/pages/SuitcaseDetails.tsx"],"names":["React","useContext","useState","IonBackButton","IonButtons","IonCard","IonCardContent","IonCardHeader","IonCardTitle","IonContent","IonFab","IonFabButton","IonFabList","IonHeader","IonIcon","IonImg","IonPage","IonTitle","IonToolbar","IonRow","IonGrid","IonCol","IonItemDivider","IonLabel","IonActionSheet","IonModal","IonButton","TripsContext","SuitcasesContextProvider","Trip","Suitcase","add","camera","trash","close","firebase","usePhotoGallery","MyModal","SuitcaseDetails","match","tripName","params","id","suitcaseName","suitcaseID","trips","currentTrip","Date","forEach","t","suitcases","currentSuitcase","x","Object","entries","colour","setID","deletePhoto","photos","takePhoto","photoSelected","setPhotoSelected","showModal","setShowModal","undefined","map","photo","index","base64","webviewPath","description","deleteSuitcase","text","role","icon","handler","s","console","log","dbRef","database","ref","remove"],"mappings":"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","sourcesContent":["import React, {useContext, useState} from \"react\";\nimport {\n  IonBackButton,\n  IonButtons,\n  IonCard,\n  IonCardContent,\n  IonCardHeader,\n  IonCardTitle,\n  IonContent,\n  IonFab,\n  IonFabButton,\n  IonFabList,\n  IonHeader,\n  IonIcon,\n  IonImg,\n  IonPage,\n  IonTitle,\n  IonToolbar,\n  IonRow,\n  IonGrid,\n  IonCol, IonItemDivider, IonLabel, IonActionSheet, IonModal, IonButton\n} from \"@ionic/react\";\nimport {RouteComponentProps} from \"react-router\";\nimport {TripsContext} from \"../TripsState\";\nimport {SuitcasesContextProvider} from \"../SuitcasesState\";\nimport Trip from \"../classes/Trip\";\nimport Suitcase from \"../classes/Suitcase\";\nimport './SuitcaseDetails.css';\nimport {add, camera, image, trash, close} from \"ionicons/icons\";\nimport {CameraResultType, CameraSource, CameraPhoto, Plugins, Camera} from \"@capacitor/core\";\nimport { useCamera } from '@ionic/react-hooks/camera';\nimport firebase from \"firebase\";\nimport {Photo, usePhotoGallery} from \"../usePhotoGallery\";\nimport {computerVision} from \"../analyseImage\";\nimport MyModal from \"../components/EditImageTextModal\";\n\ninterface SuitcaseDetailsProps extends RouteComponentProps<{\n  id: string;\n  suitcaseID: string;\n}> {}\n\n\nconst SuitcaseDetails: React.FC<SuitcaseDetailsProps> = ({match}) => {\n  let tripName: string = match.params.id;\n  let suitcaseName: string = match.params.suitcaseID;\n\n  const { trips } = useContext(TripsContext);\n  let currentTrip: Trip = new Trip(\"Loading...\", new Date(1975, 7, 26), new Date(1975, 8, 26), \"Wellington\");\n  trips.forEach((t: Trip) => {\n    if (t.tripName === tripName) {\n      currentTrip = t;\n    }\n  });\n\n  // const suitcases = SuitcasesContextProvider({null; currentTrip.id}); //Somehow pass a tripID here to get the suitcases\n\n  //\n  // console.log(currentTrip);\n  //\n\n\n\n  let suitcases = currentTrip.suitcases;\n  let currentSuitcase: Suitcase = new Suitcase(\"Loading...\", \"green\");\n\n  for (let x of Object.entries(suitcases)) {\n    if (x[1].suitcaseName === suitcaseName) {\n      currentSuitcase = new Suitcase(x[1].suitcaseName, x[1].colour);\n      currentSuitcase.setID(x[1].id);\n    }\n  }\n  // let itemhref = \"trips/\" + currentTrip.tripName + \"/\" + currentSuitcase.suitcaseName + \"/additem\";\n\n\n    // if (image instanceof Camera) {\n    //   console.log(image.base64String);\n    // }\n    // let captureDataUrl = 'data:image/jpeg;base64,' + image.base64String;\n\n  const { deletePhoto, photos, takePhoto } = usePhotoGallery(currentTrip.tripName, currentSuitcase.suitcaseName);\n  const [photoSelected, setPhotoSelected] = useState<Photo>();\n  const [showModal, setShowModal] = useState(false);\n\n  return (\n    <SuitcasesContextProvider tripID={currentTrip.id}>\n      <IonPage>\n        <IonHeader>\n          <IonToolbar>\n            <IonButtons slot=\"start\">\n              <IonBackButton defaultHref={`/trips/${currentTrip.tripName}`}/>\n            </IonButtons>\n            <IonTitle>\n              Inside {suitcaseName} Suitcase\n            </IonTitle>\n          </IonToolbar>\n        </IonHeader>\n        <IonContent>\n\n          {photoSelected ? (\n            <IonModal isOpen={showModal} cssClass='my-custom-class' onDidDismiss={() => setPhotoSelected(undefined)}>\n              <MyModal photo={photoSelected}/>\n                <IonButton onClick={() => setShowModal(false)} >Close</IonButton>\n            </IonModal>\n          ) : (<div></div>)\n          }\n\n          <IonCard>\n            {/*  <IonAvatar slot=\"start\">*/}\n                <IonImg src={`../assets/suitcases/${currentSuitcase.colour}.png`} className=\"suitcaseDetails\"/>\n              {/*</IonAvatar>*/}\n              <IonCardHeader>\n                <IonCardTitle>\n                  {currentSuitcase.suitcaseName}\n                </IonCardTitle>\n              </IonCardHeader>\n              <IonCardContent>\n                This suitcase is part of your {currentTrip.tripName} trip.\n              </IonCardContent>\n          </IonCard>\n\n          <IonItemDivider>\n            <IonLabel>Items</IonLabel>\n          </IonItemDivider>\n\n          <IonGrid>\n            <IonRow>\n              {photos.map((photo, index) => (\n                <IonCol size=\"6\" key={index}>\n                  <IonImg onClick={() => setPhotoSelected(photo)} src={photo.base64 ?? photo.webviewPath} />\n                  <div className=\"myOverlay\">\n                    <div className=\"card-title\">{photo.description}</div>\n                  </div>\n                </IonCol>\n              ))}\n            </IonRow>\n          </IonGrid>\n\n          <IonFab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\n            <IonFabButton>\n              <IonIcon icon={add} />\n            </IonFabButton>\n            <IonFabList side=\"top\">\n              {/*<IonFabButton onClick={async () => {*/}\n              {/*  setPhotoSelected(await takePhoto());*/}\n              {/*  setShowModal(true);*/}\n              {/*}}>*/}\n              <IonFabButton onClick={async () => {\n                setPhotoSelected(await takePhoto());\n                setShowModal(true);\n              }}>\n                <IonIcon icon={camera} />\n              </IonFabButton>\n            </IonFabList>\n          </IonFab>\n\n\n          <IonFab vertical=\"bottom\" horizontal=\"start\" slot=\"fixed\" >\n            <IonFabButton href={`/trips/${currentTrip.tripName}`} onClick={() => deleteSuitcase(currentTrip, currentSuitcase)} color=\"danger\">\n              <IonIcon icon={trash} />\n            </IonFabButton>\n          </IonFab>\n\n          <IonActionSheet\n            isOpen={!!photoSelected}\n            buttons={[{\n              text: 'Delete',\n              role: 'destructive',\n              icon: trash,\n              handler: () => {\n                if (photoSelected) {\n                  deletePhoto(photoSelected);\n                  // setPhotoSelected(undefined);\n                }\n              }\n            }, {\n              text: 'Cancel',\n              icon: close,\n              role: 'cancel'\n            },\n            //   {\n            //   text: 'Computer Vision',\n            //   role: 'destructive',\n            //   handler: () => {\n            //     if (photoSelected) {\n            //       computerVision(photoSelected);\n            //     }\n            //   }\n            // },\n              {\n              text: 'Edit Text',\n              role: 'destructive',\n              handler: () => {\n                if (photoSelected) {\n                  setShowModal(true)\n                }\n              }\n            }\n\n            ]}\n            // onDidDismiss={() => setPhotoSelected(undefined)}\n          />\n\n        </IonContent>\n      </IonPage>\n    </SuitcasesContextProvider>\n  );\n};\n\nfunction deleteSuitcase(t: Trip, s: Suitcase) {\n  console.log(s.id);\n  let dbRef = firebase.database().ref('/trips/' + t.id + '/suitcases/' + s.id);\n  dbRef.remove();\n}\n\nexport default SuitcaseDetails;"]},"metadata":{},"sourceType":"module"}