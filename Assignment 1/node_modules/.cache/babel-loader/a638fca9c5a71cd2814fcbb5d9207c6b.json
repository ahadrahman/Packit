{"ast":null,"code":"import { useState } from \"react\";\nimport { useCamera } from '@ionic/react-hooks/camera';\nimport { useFilesystem, base64FromPath } from '@ionic/react-hooks/filesystem';\nimport { CameraResultType, CameraSource, FilesystemDirectory } from \"@capacitor/core\";\nconst {\n  deleteFile,\n  getUri,\n  readFile,\n  writeFile\n} = useFilesystem();\nexport function usePhotoGallery() {\n  const {\n    getPhoto\n  } = useCamera();\n  const [photos, setPhotos] = useState([]);\n\n  const takePhoto = async () => {\n    const cameraPhoto = await getPhoto({\n      resultType: CameraResultType.Uri,\n      source: CameraSource.Camera,\n      quality: 100\n    });\n    const fileName = new Date().getTime() + '.jpeg';\n    const newPhotos = [{\n      filepath: fileName,\n      webviewPath: cameraPhoto.webPath\n    }, ...photos];\n    setPhotos(newPhotos);\n  };\n\n  return {\n    photos,\n    takePhoto\n  };\n}\n\nconst savePicture = async (photo, fileName) => {\n  const base64Data = await base64FromPath(photo.webPath);\n  const savedFile = await writeFile({\n    path: fileName,\n    data: base64Data,\n    directory: FilesystemDirectory.Data\n  }); // Use webPath to display the new image instead of base64 since it's\n  // already loaded into memory\n\n  return {\n    filepath: fileName,\n    webviewPath: photo.webPath\n  };\n};","map":{"version":3,"sources":["/Users/ahadyboy/Desktop/Tha Boy/UNI/2020 - UNI/SWEN325/Assignment 1/Packit/src/usePhotoGallery.ts"],"names":["useState","useCamera","useFilesystem","base64FromPath","CameraResultType","CameraSource","FilesystemDirectory","deleteFile","getUri","readFile","writeFile","usePhotoGallery","getPhoto","photos","setPhotos","takePhoto","cameraPhoto","resultType","Uri","source","Camera","quality","fileName","Date","getTime","newPhotos","filepath","webviewPath","webPath","savePicture","photo","base64Data","savedFile","path","data","directory","Data"],"mappings":"AAAA,SAASA,QAAT,QAAoC,OAApC;AACA,SAASC,SAAT,QAA0B,2BAA1B;AACA,SAASC,aAAT,EAAwBC,cAAxB,QAA8C,+BAA9C;AAGA,SAASC,gBAAT,EAA2BC,YAA3B,EAAiEC,mBAAjE,QAA4F,iBAA5F;AAEA,MAAM;AAAEC,EAAAA,UAAF;AAAcC,EAAAA,MAAd;AAAsBC,EAAAA,QAAtB;AAAgCC,EAAAA;AAAhC,IAA8CR,aAAa,EAAjE;AAEA,OAAO,SAASS,eAAT,GAA2B;AAEhC,QAAM;AAAEC,IAAAA;AAAF,MAAeX,SAAS,EAA9B;AACA,QAAM,CAACY,MAAD,EAASC,SAAT,IAAsBd,QAAQ,CAAU,EAAV,CAApC;;AAEA,QAAMe,SAAS,GAAG,YAAY;AAC5B,UAAMC,WAAW,GAAG,MAAMJ,QAAQ,CAAC;AACjCK,MAAAA,UAAU,EAAEb,gBAAgB,CAACc,GADI;AAEjCC,MAAAA,MAAM,EAAEd,YAAY,CAACe,MAFY;AAGjCC,MAAAA,OAAO,EAAE;AAHwB,KAAD,CAAlC;AAKA,UAAMC,QAAQ,GAAG,IAAIC,IAAJ,GAAWC,OAAX,KAAuB,OAAxC;AACA,UAAMC,SAAS,GAAG,CAAC;AACjBC,MAAAA,QAAQ,EAAEJ,QADO;AAEjBK,MAAAA,WAAW,EAAEX,WAAW,CAACY;AAFR,KAAD,EAGf,GAAGf,MAHY,CAAlB;AAIAC,IAAAA,SAAS,CAACW,SAAD,CAAT;AACD,GAZD;;AAcA,SAAO;AACLZ,IAAAA,MADK;AAELE,IAAAA;AAFK,GAAP;AAID;;AAED,MAAMc,WAAW,GAAG,OAAOC,KAAP,EAA2BR,QAA3B,KAAgE;AAClF,QAAMS,UAAU,GAAG,MAAM5B,cAAc,CAAC2B,KAAK,CAACF,OAAP,CAAvC;AACA,QAAMI,SAAS,GAAG,MAAMtB,SAAS,CAAC;AAChCuB,IAAAA,IAAI,EAAEX,QAD0B;AAEhCY,IAAAA,IAAI,EAAEH,UAF0B;AAGhCI,IAAAA,SAAS,EAAE7B,mBAAmB,CAAC8B;AAHC,GAAD,CAAjC,CAFkF,CAQlF;AACA;;AACA,SAAO;AACLV,IAAAA,QAAQ,EAAEJ,QADL;AAELK,IAAAA,WAAW,EAAEG,KAAK,CAACF;AAFd,GAAP;AAID,CAdD","sourcesContent":["import { useState, useEffect } from \"react\";\nimport { useCamera } from '@ionic/react-hooks/camera';\nimport { useFilesystem, base64FromPath } from '@ionic/react-hooks/filesystem';\nimport { useStorage } from '@ionic/react-hooks/storage';\nimport { isPlatform } from '@ionic/react';\nimport { CameraResultType, CameraSource, CameraPhoto, Capacitor, FilesystemDirectory } from \"@capacitor/core\";\n\nconst { deleteFile, getUri, readFile, writeFile } = useFilesystem();\n\nexport function usePhotoGallery() {\n\n  const { getPhoto } = useCamera();\n  const [photos, setPhotos] = useState<Photo[]>([]);\n\n  const takePhoto = async () => {\n    const cameraPhoto = await getPhoto({\n      resultType: CameraResultType.Uri,\n      source: CameraSource.Camera,\n      quality: 100\n    });\n    const fileName = new Date().getTime() + '.jpeg';\n    const newPhotos = [{\n      filepath: fileName,\n      webviewPath: cameraPhoto.webPath\n    }, ...photos];\n    setPhotos(newPhotos)\n  };\n\n  return {\n    photos,\n    takePhoto\n  };\n}\n\nconst savePicture = async (photo: CameraPhoto, fileName: string): Promise<Photo> => {\n  const base64Data = await base64FromPath(photo.webPath!);\n  const savedFile = await writeFile({\n    path: fileName,\n    data: base64Data,\n    directory: FilesystemDirectory.Data\n  });\n\n  // Use webPath to display the new image instead of base64 since it's\n  // already loaded into memory\n  return {\n    filepath: fileName,\n    webviewPath: photo.webPath\n  };\n};\n\nexport interface Photo {\n  filepath: string;\n  webviewPath?: string;\n  base64?: string;\n}"]},"metadata":{},"sourceType":"module"}