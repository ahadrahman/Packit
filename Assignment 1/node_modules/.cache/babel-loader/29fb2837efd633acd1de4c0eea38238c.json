{"ast":null,"code":"import { COMPUTER_VISION_SUBSCRIPTION_KEY, COMPUTER_VISION_ENDPOINT } from \"./credentials\";\n\nconst async = require('async');\n\nconst fs = require('fs');\n\nconst https = require('https');\n\nconst path = require(\"path\");\n\nconst createReadStream = require('fs').createReadStream;\n\nconst sleep = require('util').promisify(setTimeout);\n\nconst ComputerVisionClient = require('@azure/cognitiveservices-computervision').ComputerVisionClient;\n\nconst ApiKeyCredentials = require('@azure/ms-rest-js').ApiKeyCredentials;\n\nexport function computerVision() {\n  async.series([async function () {\n    const computerVisionClient = new ComputerVisionClient(new ApiKeyCredentials({\n      inHeader: {\n        'Ocp-Apim-Subscription-Key': COMPUTER_VISION_SUBSCRIPTION_KEY\n      }\n    }), COMPUTER_VISION_ENDPOINT);\n    const describeURL = 'https://www.newzealand.com/assets/Tourism-NZ/Central-Otago/2d3c2df951/img-1536212594-7243-23105-p-22C6F9AD-CC6F-6E2E-F2F80A97D2B34145-2544003__aWxvdmVrZWxseQo_FocalPointCropWzQyNyw2NDAsNjksNTQsODUsImpwZyIsNjUsMi41XQ.jpg'; // Analyze URL image\n\n    console.log('Analyzing URL image to describe...', describeURL.split('/').pop());\n    const caption = (await computerVisionClient.describeImage(describeURL)).captions[0];\n    console.log(`This may be ${caption.text} (${caption.confidence.toFixed(2)} confidence)`);\n  }, function () {\n    return new Promise(resolve => {\n      resolve();\n    });\n  }], err => {\n    throw err;\n  });\n}\ncomputerVision();","map":{"version":3,"sources":["/Users/ahadyboy/Desktop/Tha Boy/UNI/2020 - UNI/SWEN325/Assignment 1/Packit/src/analyseImage.ts"],"names":["COMPUTER_VISION_SUBSCRIPTION_KEY","COMPUTER_VISION_ENDPOINT","async","require","fs","https","path","createReadStream","sleep","promisify","setTimeout","ComputerVisionClient","ApiKeyCredentials","computerVision","series","computerVisionClient","inHeader","describeURL","console","log","split","pop","caption","describeImage","captions","text","confidence","toFixed","Promise","resolve","err"],"mappings":"AAAA,SAASA,gCAAT,EAA2CC,wBAA3C,QAA0E,eAA1E;;AAEA,MAAMC,KAAK,GAAGC,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMC,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAlB;;AACA,MAAME,KAAK,GAAGF,OAAO,CAAC,OAAD,CAArB;;AACA,MAAMG,IAAI,GAAGH,OAAO,CAAC,MAAD,CAApB;;AACA,MAAMI,gBAAgB,GAAGJ,OAAO,CAAC,IAAD,CAAP,CAAcI,gBAAvC;;AACA,MAAMC,KAAK,GAAGL,OAAO,CAAC,MAAD,CAAP,CAAgBM,SAAhB,CAA0BC,UAA1B,CAAd;;AACA,MAAMC,oBAAoB,GAAGR,OAAO,CAAC,yCAAD,CAAP,CAAmDQ,oBAAhF;;AACA,MAAMC,iBAAiB,GAAGT,OAAO,CAAC,mBAAD,CAAP,CAA6BS,iBAAvD;;AAEA,OAAO,SAASC,cAAT,GAA0B;AAC/BX,EAAAA,KAAK,CAACY,MAAN,CAAa,CACX,kBAAkB;AAChB,UAAMC,oBAAoB,GAAG,IAAIJ,oBAAJ,CAC3B,IAAIC,iBAAJ,CAAsB;AAAEI,MAAAA,QAAQ,EAAE;AAAE,qCAA6BhB;AAA/B;AAAZ,KAAtB,CAD2B,EAC6EC,wBAD7E,CAA7B;AAEA,UAAMgB,WAAW,GAAG,6NAApB,CAHgB,CAKhB;;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAY,oCAAZ,EAAkDF,WAAW,CAACG,KAAZ,CAAkB,GAAlB,EAAuBC,GAAvB,EAAlD;AACA,UAAMC,OAAO,GAAG,CAAC,MAAMP,oBAAoB,CAACQ,aAArB,CAAmCN,WAAnC,CAAP,EAAwDO,QAAxD,CAAiE,CAAjE,CAAhB;AACAN,IAAAA,OAAO,CAACC,GAAR,CAAa,eAAcG,OAAO,CAACG,IAAK,KAAIH,OAAO,CAACI,UAAR,CAAmBC,OAAnB,CAA2B,CAA3B,CAA8B,cAA1E;AAED,GAXU,EAYX,YAAY;AACV,WAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC9BA,MAAAA,OAAO;AACR,KAFM,CAAP;AAGD,GAhBU,CAAb,EAiBIC,GAAD,IAAc;AACf,UAAOA,GAAP;AACD,GAnBD;AAoBD;AAEDjB,cAAc","sourcesContent":["import { COMPUTER_VISION_SUBSCRIPTION_KEY, COMPUTER_VISION_ENDPOINT} from \"./credentials\";\n\nconst async = require('async');\nconst fs = require('fs');\nconst https = require('https');\nconst path = require(\"path\");\nconst createReadStream = require('fs').createReadStream;\nconst sleep = require('util').promisify(setTimeout);\nconst ComputerVisionClient = require('@azure/cognitiveservices-computervision').ComputerVisionClient;\nconst ApiKeyCredentials = require('@azure/ms-rest-js').ApiKeyCredentials;\n\nexport function computerVision() {\n  async.series([\n    async function () {\n      const computerVisionClient = new ComputerVisionClient(\n        new ApiKeyCredentials({ inHeader: { 'Ocp-Apim-Subscription-Key': COMPUTER_VISION_SUBSCRIPTION_KEY } }), COMPUTER_VISION_ENDPOINT);\n      const describeURL = 'https://www.newzealand.com/assets/Tourism-NZ/Central-Otago/2d3c2df951/img-1536212594-7243-23105-p-22C6F9AD-CC6F-6E2E-F2F80A97D2B34145-2544003__aWxvdmVrZWxseQo_FocalPointCropWzQyNyw2NDAsNjksNTQsODUsImpwZyIsNjUsMi41XQ.jpg';\n\n      // Analyze URL image\n      console.log('Analyzing URL image to describe...', describeURL.split('/').pop());\n      const caption = (await computerVisionClient.describeImage(describeURL)).captions[0];\n      console.log(`This may be ${caption.text} (${caption.confidence.toFixed(2)} confidence)`);\n\n    },\n    function () {\n      return new Promise((resolve) => {\n        resolve();\n      })\n    }\n  ], (err: any) => {\n    throw (err);\n  });\n}\n\ncomputerVision();"]},"metadata":{},"sourceType":"module"}